<!DOCTYPE html>
<html lang="es">
<head>
  <!-- Configuraci√≥n b√°sica del documento -->
  <meta charset="UTF-8">
  <title>Generador de Preguntas</title>
  <!-- Estilos CSS para la interfaz de usuario -->
  <style>
    /* Estilos generales de la p√°gina */
    body {
      font-family: Arial, sans-serif;  /* Fuente principal legible */
      margin: 2em;  /* Margen exterior para mejor espaciado */
    }
    /* Estilos consistentes para elementos de formulario */
    textarea, input, button {
      width: 100%;  /* Ocupar todo el ancho disponible */
      margin-top: 1em;  /* Espaciado superior uniforme */
      padding: 0.5em;  /* Relleno interno para mejor usabilidad */
    }
    /* Estilo para el √°rea de resultados */
    .resultado {
      background-color: #f0f0f0;  /* Fondo diferenciado para resultados */
      padding: 1em;  /* Espaciado interno */
      margin-top: 1em;  /* Separaci√≥n del resto de elementos */
    }
  </style>
</head>
<body>
<!-- Secci√≥n principal del generador de preguntas -->
  <h1>üß† Generador de Preguntas</h1>
  
  <!-- Campo para ingresar el texto base -->
  <label for="texto">Escribe un texto largo (m√≠nimo 20 palabras):</label>
  <textarea id="texto" rows="8" placeholder="Escribe aqu√≠ tu texto..."></textarea>
  
  <!-- Bot√≥n para iniciar la generaci√≥n de preguntas -->
  <button onclick="generarPreguntas()">Generar Preguntas</button>

  <!-- Contenedor para mostrar los resultados -->
  <div id="resultado" class="resultado"></div>

<!-- Script con la l√≥gica principal de la aplicaci√≥n -->
  <script>
    /**
     * Funci√≥n as√≠ncrona para generar preguntas basadas en un texto
     * Se comunica con un backend mediante API REST
     */
    async function generarPreguntas() {
      // Obtener el texto ingresado por el usuario
      const texto = document.getElementById('texto').value;
      
      // Referencia al contenedor de resultados
      const resultadoDiv = document.getElementById('resultado');
      
      // Mostrar estado de procesamiento
      resultadoDiv.innerHTML = '‚åõ Generando preguntas...';

      try {
        // Enviar solicitud POST al endpoint del backend
        const response = await fetch('/generar_preguntas', {
          method: 'POST',  // M√©todo HTTP
          headers: { 'Content-Type': 'application/json' },  // Cabeceras
          body: JSON.stringify({ texto })  // Datos enviados al servidor
        });

        // Procesar la respuesta JSON del servidor
        const data = await response.json();
        
        // Si la respuesta contiene preguntas, mostrarlas en una lista
        if (data.preguntas_generadas) {
          resultadoDiv.innerHTML = '<h3>Preguntas Generadas:</h3><ul>' +
            // Convertir array de preguntas en elementos <li>
            data.preguntas_generadas.map(p => `<li>${p}</li>`).join('') + '</ul>';
        } else {
          // Mostrar mensaje de error si existe
          resultadoDiv.innerHTML = `<strong>Error:</strong> ${data.error}`;
        }
      } catch (error) {
        // Manejar errores de conexi√≥n o del servidor
        resultadoDiv.innerHTML = `<strong>Error de conexi√≥n:</strong> ${error.message}`;
      }
    }
  </script>

</body>
</html>